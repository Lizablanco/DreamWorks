{# login_page.html #}
{% extends 'base.html' %}
{% block content %}
  {% include 'partials/modals.html' %}
{% endblock %}

<section class="register-form-section">
  <form method="post" action="{% url 'procesar_registro' %}">
    {% csrf_token %}
    {{ form.as_p }}
    {% if form.errors %}
      <ul style="color: red;">
        {% for field in form %}
          {% for error in field.errors %}
            <li>{{ field.label }}: {{ error }}</li>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    <button type="submit">Registrarme</button>
  </form>
  <p>¿Ya tienes cuenta? <a href="#" id="abrir-login-desde-register">Inicia sesión aquí</a>
</section>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const loginDesdeRegister = document.getElementById('abrir-login-desde-register');
  const loginModal = document.querySelector('.formulario-login');

  loginDesdeRegister?.addEventListener('click', function (e) {
    e.preventDefault();
    if (loginModal) {
      loginModal.style.display = 'block';
    }
  });
});
</script>

